# **C++构建高性能Web服务器——Step 0：前言**


## **一、想法:**

- 一直想用C++做个项目，因为比较喜欢网络通信这部分，又让事情变得更有些挑战性，我最终选择实现一个高性能的Web服务器。

- 在宏观上我希望TinyWeb能够这样:
    - 配置简单
    - 扩展容易
    - 性能高效
    - 功能强大


- 并希望在开发的过程中能够掌握以下知识:
    - Unix环境编程的技能
    - Unix网络编程的技能
    - 巩固C++11知识
    - 掌握构建大型C++项目的技能
    - 掌握多进程、多线程同步、通信机制
    - 实现高性能可复用Memory-pool
    - 掌握基本的数据结构（红黑树、链表、Hash）
    - 能够把通用的网络部分作为单独的网络库、为以后网络开发提升效率

- TinyWeb 目前的功能是：
    - 基本的Web服务，只能提供静态网页服务。
    - 单进程＋Reactor+非阻塞方式运行
    - 只能用于Linux系统，不专注跨平台
    - 基本的Web服务配置

- TinyWeb 目前的发展计划：
    - 使用进程池的方式提高并发性
    - 强有力的支持多种版本Http协议
    - 负载均衡功能
    - 代理功能

--------------------------

## **二、系列博客分类**

0.[前言]()

1.[基础类的介绍&实现]()

2.[基本数据结构的实现]()

3.[核心类的介绍&实现]()

4.[Http逻辑实现]()

5.[Http逻辑实现(dynamic response)](s)

5.[番外篇--各种难点&实现想法]()

--------------------------

## **三、设计思想**



### 1. 网络中最麻烦的是如何处理阻塞的事件:

> 如果IO事件没有发生,系统阻塞的等待IO事件发生,那么CPU就被
浪费了,为实现高并发,不能让进程阻塞,CPU等待IO事件.
借助Linux高效的Epoll机制,

至于为何使用Epoll,而不使用Select或Poll,[点这里看看吧](http://blog.csdn.net/russell_tao/article/details/17119729).



### 2.为了提高并发性:到底是选择多进程还是多线程模式

> 多进程与多线程各有优缺点,并且大部分是互补的,具体就不再赘述了,
> 详情请[戳这里](https://www.cnblogs.com/zhanht/p/5401685.html)
> 我选择多进程的原因是:
> 1. 安全性高,一个进程崩溃不会影响别的进程
> 2. 容易调试,不易造成死锁
> 3. 有较为成熟的进程间通信\同步机制(共享内存,信号,文件锁,socketpair....)

> 在接受客户端连接的时候,如何再去创建一个进程,效率低下.故因此采用进程池的方式:
Master进程为父进程,主要控制子进程的状态;可动态配置数量的Slave子进程,用于接受连接,
处理Http逻辑.

### 3.C++最难管理的还是内存


> 为了方便的进行内存管理,我设计了一个内存池,不会产生大量的内存碎片,性能待测试.以后还会
介绍如何实现的,尽请期待.


### 4.进程间通信的方式很多,到底选择哪几个

> 了解了下Nginx,有考虑了使用的复杂度,我决定使用这几个通信.同步机制
> - 原子操作
> - 信号量
> - 消息队列
> - 共享内存
> - 信号


--------------------------

## **四、源码**

想要源代码的请[戳这里](https://github.com/GeneralSandman/TinyWeb),希望大家多多对代码风格做出评判,毕竟自己只是个大三的学生.

--------------------------

## **五、参考文献**

小伙伴想要了解更多的高性能的网络编程,推荐一个[大神的专栏](http://blog.csdn.net/column/details/high-perf-network.html)